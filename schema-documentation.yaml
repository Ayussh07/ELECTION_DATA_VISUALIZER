# Indian Election Data - Database Schema Documentation
# Short version focusing on core structure

database:
  name: election_data
  type: SQLite
  description: "Indian Lok Sabha election data (1991-2019)"

tables:
  states:
    columns: [id (PK), name (UNIQUE), created_at]
    relationships:
      - constituencies (one-to-many via state_id)

  parties:
    columns: [id (PK), name (UNIQUE), party_type_tcpd, party_id, created_at]
    relationships:
      - results (one-to-many via party_id)

  constituencies:
    columns: [id (PK), state_id (FK), name, constituency_no, constituency_type, sub_region, assembly_no, created_at]
    unique: [state_id, name, constituency_no]
    relationships:
      - states (many-to-one)
      - results (one-to-many via constituency_id)

  elections:
    columns: [id (PK), year, month, poll_no, delimid, election_type, created_at]
    unique: [year, month, poll_no, delimid]
    relationships:
      - results (one-to-many via election_id)

  candidates:
    columns: [id (PK), name, sex, myneta_education, tcpd_prof_main, tcpd_prof_main_desc, tcpd_prof_second, tcpd_prof_second_desc, pid, created_at]
    relationships:
      - results (one-to-many via candidate_id)

  results:
    description: "Main fact table connecting elections, constituencies, candidates, and parties"
    columns:
      - election_id (FK), constituency_id (FK), candidate_id (FK), party_id (FK)
      - position, votes, candidate_type
      - valid_votes, electors, n_cand
      - turnout_percentage, vote_share_percentage, vote_share_pct
      - deposit_lost, margin, margin_percentage, margin_pct
      - enop, last_poll, contested
      - last_party, last_party_id, last_constituency_name
      - same_constituency, same_party, no_terms, turncoat, incumbent, recontest
      - created_at
    indexes:
      - election_id, constituency_id, party_id, candidate_id
      - position, turnout_percentage, vote_share_percentage, margin_percentage
    relationships:
      - elections (many-to-one)
      - constituencies (many-to-one)
      - candidates (many-to-one)
      - parties (many-to-one)

relationships:
  - States → Constituencies (one-to-many)
  - Elections → Results (one-to-many)
  - Constituencies → Results (one-to-many)
  - Candidates → Results (one-to-many)
  - Parties → Results (one-to-many)

constraints:
  year_range: [1991, 2019]
  percentage_fields: [0, 100]
  position: min 1
